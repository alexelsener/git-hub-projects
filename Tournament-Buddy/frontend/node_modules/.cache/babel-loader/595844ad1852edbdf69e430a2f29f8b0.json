{"remainingRequest":"C:\\Users\\Student\\workspace\\capstone-tournament_hosting\\frontend\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\Student\\workspace\\capstone-tournament_hosting\\frontend\\node_modules\\eslint-loader\\index.js??ref--13-0!C:\\Users\\Student\\workspace\\capstone-tournament_hosting\\frontend\\src\\auth.js","dependencies":[{"path":"C:\\Users\\Student\\workspace\\capstone-tournament_hosting\\frontend\\src\\auth.js","mtime":1586177762088},{"path":"C:\\Users\\Student\\workspace\\capstone-tournament_hosting\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Student\\workspace\\capstone-tournament_hosting\\frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\Student\\workspace\\capstone-tournament_hosting\\frontend\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZGF0ZS50by1zdHJpbmciOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAuZXhlYyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5yZXBsYWNlIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnNwbGl0IjsKZXhwb3J0IGRlZmF1bHQgewogIC8qKg0KICAgKiBSZXR1cm5zIHRoZSBhdXRoZW50aWNhdGlvbiB0b2tlbiBmcm9tIGxvY2FsIHN0b3JhZ2UuDQogICAqLwogIGdldFRva2VuOiBmdW5jdGlvbiBnZXRUb2tlbigpIHsKICAgIHRyeSB7CiAgICAgIHJldHVybiBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnQXV0aG9yaXphdGlvbicpOwogICAgfSBjYXRjaCAoX3VudXNlZCkgewogICAgICByZXR1cm4gbnVsbDsKICAgIH0KICB9LAoKICAvKioNCiAgICogUGFyc2VzIGFuZCBzYXZlcyB0aGUgYXV0aGVudGljYXRpb24gdG9rZW4uDQogICAqIEBwYXJhbSB7U3RyaW5nfSB0b2tlbiBBIEpXVCBlbmNvZGVkIHRva2VuLg0KICAgKi8KICBzYXZlVG9rZW46IGZ1bmN0aW9uIHNhdmVUb2tlbih0b2tlbikgewogICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ0F1dGhvcml6YXRpb24nLCB0b2tlbik7CiAgfSwKCiAgLyoqDQogICAqIEludmFsaWRhdGVzIHRoZSBsb2NhbCBhdXRoZW50aWNhdGlvbiB0b2tlbi4NCiAgICovCiAgZGVzdHJveVRva2VuOiBmdW5jdGlvbiBkZXN0cm95VG9rZW4oKSB7CiAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgnQXV0aG9yaXphdGlvbicpOwogIH0sCgogIC8qKg0KICAgKiBSZXR1cm5zIHRoZSB1c2VyIHJlcHJlc2VudGVkIGJ5IHRoZSBhdXRoZW50aWNhdGlvbiB0b2tlbiAobnVsbCBpZiB1c2VyIGlzIG5vdCBhdXRoZW50aWNhdGVkKS4NCiAgICogQGZ1bmN0aW9uDQogICAqLwogIGdldFVzZXI6IGZ1bmN0aW9uIGdldFVzZXIoKSB7CiAgICB2YXIgdG9rZW4gPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnQXV0aG9yaXphdGlvbicpOwogICAgdmFyIHVzZXIgPSBudWxsOyAvLyBJZiBhIHRva2VuIGV4aXN0cyB0aGVuIGRlY29kZSBpdAoKICAgIGlmICh0b2tlbikgewogICAgICB2YXIgYmFzZTY0VXJsID0gdG9rZW4uc3BsaXQoJy4nKVsxXTsKICAgICAgdmFyIGJhc2U2NCA9IGJhc2U2NFVybC5yZXBsYWNlKC8tL2csICcrJykucmVwbGFjZSgvXy9nLCAnLycpOwogICAgICB2YXIgc2Vjb25kc1NpbmNlRXBvY2ggPSBuZXcgRGF0ZSgpIC8gMTAwMDsKICAgICAgdmFyIHBhcnNlZFRva2VuID0gSlNPTi5wYXJzZSh3aW5kb3cuYXRvYihiYXNlNjQpKTsgLy8gSWYgY3VycmVudCBkYXRlIGlzIGFmdGVyIGV4cGlyYXRpb24gZGF0ZSB0aGVuIGRlc3Ryb3kgaXQKCiAgICAgIGlmIChzZWNvbmRzU2luY2VFcG9jaCA+IHBhcnNlZFRva2VuLmV4cCkgewogICAgICAgIHRoaXMuZGVzdHJveVRva2VuKCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdXNlciA9IHBhcnNlZFRva2VuOwogICAgICB9CiAgICB9CgogICAgcmV0dXJuIHVzZXI7CiAgfSwKICBsb2dvdXQ6IGZ1bmN0aW9uIGxvZ291dCgpIHsKICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCdBdXRob3JpemF0aW9uJyk7CiAgfQp9Ow=="},{"version":3,"sources":["C:/Users/Student/workspace/capstone-tournament_hosting/frontend/src/auth.js"],"names":["getToken","localStorage","getItem","saveToken","token","setItem","destroyToken","removeItem","getUser","user","base64Url","split","base64","replace","secondsSinceEpoch","Date","parsedToken","JSON","parse","window","atob","exp","logout"],"mappings":";;;;AAAA,eAAe;AACb;;;AAGAA,EAAAA,QAAQ,EAAE,oBAAW;AACnB,QAAI;AACF,aAAOC,YAAY,CAACC,OAAb,CAAqB,eAArB,CAAP;AACD,KAFD,CAEE,gBAAM;AACN,aAAO,IAAP;AACD;AACF,GAVY;;AAWb;;;;AAIAC,EAAAA,SAfa,qBAeHC,KAfG,EAeI;AACfH,IAAAA,YAAY,CAACI,OAAb,CAAqB,eAArB,EAAsCD,KAAtC;AACD,GAjBY;;AAkBb;;;AAGAE,EAAAA,YArBa,0BAqBE;AACbL,IAAAA,YAAY,CAACM,UAAb,CAAwB,eAAxB;AACD,GAvBY;;AAwBb;;;;AAIAC,EAAAA,OA5Ba,qBA4BH;AACR,QAAMJ,KAAK,GAAGH,YAAY,CAACC,OAAb,CAAqB,eAArB,CAAd;AACA,QAAIO,IAAI,GAAG,IAAX,CAFQ,CAIR;;AACA,QAAIL,KAAJ,EAAW;AACT,UAAMM,SAAS,GAAGN,KAAK,CAACO,KAAN,CAAY,GAAZ,EAAiB,CAAjB,CAAlB;AACA,UAAMC,MAAM,GAAGF,SAAS,CAACG,OAAV,CAAkB,IAAlB,EAAwB,GAAxB,EAA6BA,OAA7B,CAAqC,IAArC,EAA2C,GAA3C,CAAf;AACA,UAAMC,iBAAiB,GAAG,IAAIC,IAAJ,KAAa,IAAvC;AACA,UAAMC,WAAW,GAAGC,IAAI,CAACC,KAAL,CAAWC,MAAM,CAACC,IAAP,CAAYR,MAAZ,CAAX,CAApB,CAJS,CAMT;;AACA,UAAIE,iBAAiB,GAAGE,WAAW,CAACK,GAApC,EAAyC;AACvC,aAAKf,YAAL;AACD,OAFD,MAEO;AACLG,QAAAA,IAAI,GAAGO,WAAP;AACD;AACF;;AAED,WAAOP,IAAP;AACD,GAhDY;AAiDba,EAAAA,MAjDa,oBAiDJ;AACPrB,IAAAA,YAAY,CAACM,UAAb,CAAwB,eAAxB;AACD;AAnDY,CAAf","sourcesContent":["export default {\r\n  /**\r\n   * Returns the authentication token from local storage.\r\n   */\r\n  getToken: function() {\r\n    try {\r\n      return localStorage.getItem('Authorization');\r\n    } catch {\r\n      return null;\r\n    }\r\n  },\r\n  /**\r\n   * Parses and saves the authentication token.\r\n   * @param {String} token A JWT encoded token.\r\n   */\r\n  saveToken(token) {\r\n    localStorage.setItem('Authorization', token);\r\n  },\r\n  /**\r\n   * Invalidates the local authentication token.\r\n   */\r\n  destroyToken() {\r\n    localStorage.removeItem('Authorization');\r\n  },\r\n  /**\r\n   * Returns the user represented by the authentication token (null if user is not authenticated).\r\n   * @function\r\n   */\r\n  getUser() {\r\n    const token = localStorage.getItem('Authorization');\r\n    let user = null;\r\n\r\n    // If a token exists then decode it\r\n    if (token) {\r\n      const base64Url = token.split('.')[1];\r\n      const base64 = base64Url.replace(/-/g, '+').replace(/_/g, '/');\r\n      const secondsSinceEpoch = new Date() / 1000;\r\n      const parsedToken = JSON.parse(window.atob(base64));\r\n\r\n      // If current date is after expiration date then destroy it\r\n      if (secondsSinceEpoch > parsedToken.exp) {\r\n        this.destroyToken();\r\n      } else {\r\n        user = parsedToken;\r\n      }\r\n    }\r\n\r\n    return user;\r\n  },\r\n  logout() {\r\n    localStorage.removeItem('Authorization');\r\n  },\r\n};\r\n"]}]}