{"remainingRequest":"C:\\Users\\Student\\workspace\\capstone-tournament_hosting\\frontend\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\Student\\workspace\\capstone-tournament_hosting\\frontend\\node_modules\\vuetify-loader\\lib\\loader.js??ref--18-0!C:\\Users\\Student\\workspace\\capstone-tournament_hosting\\frontend\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\Student\\workspace\\capstone-tournament_hosting\\frontend\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Student\\workspace\\capstone-tournament_hosting\\frontend\\src\\components\\JoinTeam.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Student\\workspace\\capstone-tournament_hosting\\frontend\\src\\components\\JoinTeam.vue","mtime":1587123339950},{"path":"C:\\Users\\Student\\workspace\\capstone-tournament_hosting\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Student\\workspace\\capstone-tournament_hosting\\frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\Student\\workspace\\capstone-tournament_hosting\\frontend\\node_modules\\vuetify-loader\\lib\\loader.js","mtime":1574476662000},{"path":"C:\\Users\\Student\\workspace\\capstone-tournament_hosting\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Student\\workspace\\capstone-tournament_hosting\\frontend\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0IjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZm9yLWVhY2giOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5udW1iZXIuY29uc3RydWN0b3IiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5mb3ItZWFjaCI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCmltcG9ydCBhdXRoIGZyb20gIkAvYXV0aCI7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiSm9pblRlYW0iLAogIHByb3BzOiB7CiAgICB0ZWFtSWQ6IE51bWJlcgogIH0sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGRpYWxvZzogZmFsc2UsCiAgICAgIGlzVmFsaWQ6IHRydWUsCiAgICAgIHJlcXVlc3Q6IHsKICAgICAgICBzZW5kZXJJZDogIiIsCiAgICAgICAgcmVjaXBpZW50SWQ6ICIiLAogICAgICAgIG1lc3NhZ2U6ICIiCiAgICAgIH0sCiAgICAgIHVzZXJUZWFtczogbnVsbCwKICAgICAgaXNNZW1iZXI6IGZhbHNlLAogICAgICBtc2dSdWxlczogW2Z1bmN0aW9uICh2KSB7CiAgICAgICAgcmV0dXJuICEhdiB8fCAiUGxlYXNlIGVudGVyIGEgbWVzc2FnZS4gIjsKICAgICAgfSwgZnVuY3Rpb24gKHYpIHsKICAgICAgICByZXR1cm4gdiAmJiB2Lmxlbmd0aCA+PSAxMCB8fCAiIFlvdXIgbWVzc2FnZSBuZWVkcyB0byBiZSAxMCBjaGFyYWN0ZXJzIG9yIG1vcmUuIjsKICAgICAgfV0KICAgIH07CiAgfSwKICBtZXRob2RzOiB7CiAgICBzZW5kSm9pblJlcXVlc3Q6IGZ1bmN0aW9uIHNlbmRKb2luUmVxdWVzdCgpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIGlmICh0aGlzLmlzTWVtYmVyID09PSBmYWxzZSkgewogICAgICAgIGlmICh0aGlzLiRyZWZzLmpvaW5UZWFtRm9ybS52YWxpZGF0ZSgpKSB7CiAgICAgICAgICBmZXRjaCgiIi5jb25jYXQocHJvY2Vzcy5lbnYuVlVFX0FQUF9SRU1PVEVfQVBJLCAiL2FwaS90ZWFtL2pvaW4tcmVxdWVzdCIpLCB7CiAgICAgICAgICAgIG1ldGhvZDogIlBPU1QiLAogICAgICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICAgICAgQXV0aG9yaXphdGlvbjogIkJlYXJlciAiICsgYXV0aC5nZXRUb2tlbigpLAogICAgICAgICAgICAgIEFjY2VwdDogImFwcGxpY2F0aW9uL2pzb24iLAogICAgICAgICAgICAgICJjb250ZW50LXR5cGUiOiAiYXBwbGljYXRpb24vanNvbiIKICAgICAgICAgICAgfSwKICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkodGhpcy5yZXF1ZXN0KQogICAgICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICAgICAgaWYgKHJlc3BvbnNlLm9rKSB7CiAgICAgICAgICAgICAgX3RoaXMuJGVtaXQoImpvaW4tc3VjY2VzcyIpOwoKICAgICAgICAgICAgICBfdGhpcy5kaWFsb2cgPSBmYWxzZTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICBfdGhpcy4kZW1pdCgiZHVwbGljYXRlLXJlcXVlc3QiKTsKCiAgICAgICAgICAgICAgX3RoaXMuZGlhbG9nID0gZmFsc2U7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfQogICAgfSwKICAgIHNldFVzZXI6IGZ1bmN0aW9uIHNldFVzZXIoKSB7CiAgICAgIHRoaXMucmVxdWVzdC5zZW5kZXJJZCA9IGF1dGguZ2V0VXNlcigpLmlkOwogICAgfSwKICAgIHNldFRlYW06IGZ1bmN0aW9uIHNldFRlYW0oKSB7CiAgICAgIHRoaXMucmVxdWVzdC5yZWNpcGllbnRJZCA9IHRoaXMudGVhbUlkOwogICAgfSwKICAgIGNoZWNrSWZNZW1iZXI6IGZ1bmN0aW9uIGNoZWNrSWZNZW1iZXIoKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgdGhpcy51c2VyVGVhbXMuZm9yRWFjaChmdW5jdGlvbiAodGVhbSkgewogICAgICAgIGlmICh0ZWFtLnRlYW1JZCA9PT0gX3RoaXMyLnJlcXVlc3QucmVjaXBpZW50SWQpIHsKICAgICAgICAgIF90aGlzMi5pc01lbWJlciA9IHRydWU7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0KICB9LAogIGNyZWF0ZWQ6IGZ1bmN0aW9uIGNyZWF0ZWQoKSB7CiAgICB2YXIgX3RoaXMzID0gdGhpczsKCiAgICB0aGlzLnNldFVzZXIoKTsKICAgIHRoaXMuc2V0VGVhbSgpOwogICAgZmV0Y2goIiIuY29uY2F0KHByb2Nlc3MuZW52LlZVRV9BUFBfUkVNT1RFX0FQSSwgIi9hcGkvdGVhbS8/dXNlcklkPSIpLmNvbmNhdChhdXRoLmdldFVzZXIoKS5pZCksIHsKICAgICAgbWV0aG9kOiAiR0VUIiwKICAgICAgaGVhZGVyczogbmV3IEhlYWRlcnMoewogICAgICAgIEF1dGhvcml6YXRpb246ICJCZWFyZXIgIiArIGF1dGguZ2V0VG9rZW4oKQogICAgICB9KSwKICAgICAgY3JlZGVudGlhbHM6ICJzYW1lLW9yaWdpbiIKICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgIGlmIChyZXNwb25zZS5vaykgewogICAgICAgIHJldHVybiByZXNwb25zZS5qc29uKCk7CiAgICAgIH0KICAgIH0pLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHsKICAgICAgX3RoaXMzLnVzZXJUZWFtcyA9IGRhdGE7CiAgICB9KVsiY2F0Y2giXShmdW5jdGlvbiAoZXJyKSB7CiAgICAgIHJldHVybiBjb25zb2xlLmVycm9yKGVycik7CiAgICB9KTsKICB9Cn07"},{"version":3,"sources":["JoinTeam.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n  <v-row justify=\"center\">\r\n    <v-dialog v-model=\"dialog\" persistent max-width=\"600px\">\r\n      <template v-slot:activator=\"{ on }\">\r\n        <v-btn outlined color=\"#03DAC5\" dark v-on=\"on\" @click=\"checkIfMember()\">\r\n          <v-icon dark>mdi-send</v-icon>Join\r\n        </v-btn>\r\n      </template>\r\n      <v-card>\r\n        <v-card-title>\r\n          <v-row>\r\n            <span v-if=\"isMember === false\" class=\"headline\">Join Team</span>\r\n            <span v-if=\"isMember === true\" class=\"headline\">You are a member of this team.</span>\r\n          </v-row>\r\n        </v-card-title>\r\n        <v-card-text>\r\n          <v-container>\r\n            <v-row>\r\n              <v-col cols=\"12\">\r\n                <v-form ref=\"joinTeamForm\" v-model=\"isValid\">\r\n                  <v-textarea\r\n                    outlined\r\n                    label=\"Message Team Captian\"\r\n                    v-model=\"request.message\"\r\n                    :rules=\"msgRules\"\r\n                    :disabled=\"isMember == true\"\r\n                    required\r\n                    color=\"#03DAC5\"\r\n                  ></v-textarea>\r\n                </v-form>\r\n              </v-col>\r\n            </v-row>\r\n          </v-container>\r\n        </v-card-text>\r\n\r\n        <v-card-actions>\r\n          <v-spacer></v-spacer>\r\n          <v-btn color=\"#03DAC5\" text @click=\"dialog = false;\">Close</v-btn>\r\n          <v-btn\r\n            color=\"#03DAC5\"\r\n            text\r\n            :disabled=\"(!isValid) || (isMember === true)\"\r\n            @click=\" sendJoinRequest()\"\r\n            @join-success=\"dialog=false\"\r\n            \r\n          >Join</v-btn>\r\n        </v-card-actions>\r\n      </v-card>\r\n    </v-dialog>\r\n  </v-row>\r\n</template>\r\n\r\n<script>\r\nimport auth from \"@/auth\";\r\n\r\nexport default {\r\n  name: \"JoinTeam\",\r\n\r\n  props: {\r\n    teamId: Number\r\n  },\r\n\r\n  data: () => ({\r\n    dialog: false,\r\n    isValid: true,\r\n    request: {\r\n      senderId: \"\",\r\n      recipientId: \"\",\r\n      message: \"\"\r\n    },\r\n    userTeams: null,\r\n    isMember: false,\r\n    msgRules: [\r\n      v => !!v || \"Please enter a message. \",\r\n      v =>\r\n        (v && v.length >= 10) ||\r\n        \" Your message needs to be 10 characters or more.\"\r\n    ]\r\n  }),\r\n\r\n  methods: {\r\n    sendJoinRequest() {\r\n      if (this.isMember === false) {\r\n        if (this.$refs.joinTeamForm.validate()) {\r\n          fetch(`${process.env.VUE_APP_REMOTE_API}/api/team/join-request`, {\r\n            method: \"POST\",\r\n            headers: {\r\n              Authorization: \"Bearer \" + auth.getToken(),\r\n              Accept: \"application/json\",\r\n              \"content-type\": \"application/json\"\r\n            },\r\n            body: JSON.stringify(this.request)\r\n          }).then(response => {\r\n            if (response.ok) {\r\n              this.$emit(\"join-success\");\r\n              this.dialog = false;\r\n            } else {\r\n              this.$emit(\"duplicate-request\");\r\n              this.dialog = false;\r\n            }\r\n          });\r\n        }\r\n      }\r\n    },\r\n    setUser() {\r\n      this.request.senderId = auth.getUser().id;\r\n    },\r\n    setTeam() {\r\n      this.request.recipientId = this.teamId;\r\n    },\r\n    checkIfMember() {\r\n      this.userTeams.forEach(team => {\r\n        if (team.teamId === this.request.recipientId) {\r\n          this.isMember = true;\r\n        } \r\n      });\r\n    }\r\n  },\r\n  created() {\r\n    this.setUser();\r\n    this.setTeam();\r\n\r\n    fetch(\r\n      `${process.env.VUE_APP_REMOTE_API}/api/team/?userId=${auth.getUser().id}`,\r\n      {\r\n        method: \"GET\",\r\n        headers: new Headers({\r\n          Authorization: \"Bearer \" + auth.getToken()\r\n        }),\r\n        credentials: \"same-origin\"\r\n      }\r\n    )\r\n      .then(response => {\r\n        if (response.ok) {\r\n          return response.json();\r\n        }\r\n      })\r\n      .then(data => {\r\n        this.userTeams = data;\r\n      })\r\n      .catch(err => console.error(err));\r\n  }\r\n};\r\n</script>\r\n\r\n\r\n\r\n<style>\r\n</style>"],"sourceRoot":"src/components"}]}