{"remainingRequest":"C:\\Users\\Student\\workspace\\capstone-tournament_hosting\\frontend\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Student\\workspace\\capstone-tournament_hosting\\frontend\\src\\views\\TournamentPage.vue?vue&type=style&index=0&id=38cfce5c&scoped=true&lang=css&","dependencies":[{"path":"C:\\Users\\Student\\workspace\\capstone-tournament_hosting\\frontend\\src\\views\\TournamentPage.vue","mtime":1587140788815},{"path":"C:\\Users\\Student\\workspace\\capstone-tournament_hosting\\frontend\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Student\\workspace\\capstone-tournament_hosting\\frontend\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"C:\\Users\\Student\\workspace\\capstone-tournament_hosting\\frontend\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"C:\\Users\\Student\\workspace\\capstone-tournament_hosting\\frontend\\node_modules\\vuetify-loader\\lib\\loader.js","mtime":1574476662000},{"path":"C:\\Users\\Student\\workspace\\capstone-tournament_hosting\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Student\\workspace\\capstone-tournament_hosting\\frontend\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKDQoucm91bmQgew0KICBtYXJnaW4tcmlnaHQ6IDEwcHg7DQogIG1hcmdpbi1sZWZ0OiAxMHB4Ow0KfQ0K"},{"version":3,"sources":["TournamentPage.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmZA;AACA;AACA;AACA","file":"TournamentPage.vue","sourceRoot":"src/views","sourcesContent":[" <template>\r\n  <v-container>\r\n    <v-row>\r\n      <v-col cols=\"3\">\r\n        <v-img :src=\"getImage()\" class=\"my-3\" contain height=\"150\" />\r\n      </v-col>\r\n      <v-col cols=\"3\">\r\n        <h1>{{tournament.tournamentName}}</h1>\r\n        <span>Organizer: {{tournamentOwner.username}}</span>\r\n        <p>Location: {{tournament.location}}</p>\r\n      </v-col>\r\n      <v-col cols=\"6\">\r\n        <v-row>\r\n          <v-col>\r\n            <h3>Tournament Game/Sport:</h3>\r\n            <p>{{tournament.game}}</p>\r\n          </v-col>\r\n          <v-col>\r\n            <h3>Tournament Prize Description:</h3>\r\n            <p>{{tournament.prizeDescription}}</p>\r\n          </v-col>\r\n        </v-row>\r\n        <v-row>\r\n          <v-col>\r\n            <h3>Tournament Entry Fee:</h3>\r\n            <p>${{tournament.entryFee}}</p>\r\n          </v-col>\r\n          <v-col>\r\n            <h3>Tournament Timeline:</h3>\r\n            <span>From: {{tournament.startDate}}</span>\r\n            <p>To: {{tournament.endDate}}</p>\r\n          </v-col>\r\n        </v-row>\r\n      </v-col>\r\n      <v-col v-if=\"tournament.tournamentOwner === currentUser\">\r\n        <v-card-actions>\r\n          <accept-entries\r\n            v-if=\"tournament.tournamentOwner === currentUser && !tournament.completed\"\r\n            :currentTourney=\"tournament\"\r\n          />\r\n          <v-spacer></v-spacer>\r\n          <v-btn\r\n            color=\"#03DAC5\"\r\n            outlined\r\n            v-if=\"tournament.tournamentOwner === currentUser  && !tournament.completed\"\r\n            :to=\"{ name: 'tournament-pairings', params:{id: tournament.tournamentId, round: rounds.length + 1}}\"\r\n          >Make New Round</v-btn>\r\n          <v-spacer></v-spacer>\r\n          <!--dialog pop up-->\r\n          <!-- <v-btn\r\n            color=\"#03DAC5\"\r\n            v-if=\"tournament.tournamentOwner === currentUser  && !tournament.completed\"\r\n            @click=\"endTournament()\"\r\n          >End Tournament</v-btn>-->\r\n          <v-dialog v-model=\"dialog2\" width=\"500\" overlay-opacity=\"0.9\">\r\n            <template v-slot:activator=\"{ on }\">\r\n              <v-btn\r\n                color=\"red lighten-2\"\r\n                outlined\r\n                dark\r\n                v-on=\"on\"\r\n                v-if=\"tournament.tournamentOwner === currentUser  && !tournament.completed\"\r\n              >End Tournament</v-btn>\r\n            </template>\r\n            <v-card>\r\n              <v-card-title primary-title>Confirmation</v-card-title>\r\n              <v-card-text>Are you sure you want to end the tournament?</v-card-text>\r\n              <v-divider></v-divider>\r\n              <v-card-actions>\r\n                <v-spacer></v-spacer>\r\n                <v-btn\r\n                  color=\"red\"\r\n                  text\r\n                  @click=\"dialog2 = false; endTournament()\"\r\n                >Finalize Tournament</v-btn>\r\n              </v-card-actions>\r\n            </v-card>\r\n          </v-dialog>\r\n          <!--dialog pop up-->\r\n          <v-spacer></v-spacer>\r\n          <edit-tournament\r\n            :current-tournament=\"tournament\"\r\n            @update-tournament=\"tourneyEvent()\"\r\n            v-if=\"tournament.tournamentOwner === currentUser  && !tournament.completed\"\r\n          />\r\n        </v-card-actions>\r\n      </v-col>\r\n    </v-row>\r\n\r\n    <v-row v-if=\"!tournament.completed\">\r\n      <v-col>\r\n        <v-card>\r\n          <v-card-title>\r\n            Tournament Teams\r\n            <v-spacer></v-spacer>\r\n            <v-text-field\r\n              v-model=\"searchTeams\"\r\n              append-icon=\"mdi-magnify\"\r\n              label=\"Search Tournament Teams\"\r\n              single-line\r\n              hide-details\r\n            ></v-text-field>\r\n          </v-card-title>\r\n          <v-data-table :headers=\"tourneyTeamHeaders\" :items=\"tourneyTeams\" :search=\"searchTeams\">\r\n            <template v-slot:item=\"row\">\r\n              <tr>\r\n                <td\r\n                  class=\"clickable\"\r\n                  @click=\"$router.push('/team-page/' + row.item.teamId)\"\r\n                >{{row.item.teamName}}</td>\r\n                <td>{{row.item.captainUsername}}</td>\r\n                <td>{{row.item.captainEmail}}</td>\r\n                <td align=\"right\" width=\"10\">\r\n                  <!--add dialog pop up-->\r\n                  <v-dialog v-model=\"dialog\" width=\"500\" overlay-opacity=\"0.2\">\r\n                    <template v-slot:activator=\"{ on }\">\r\n                      <v-btn\r\n                        small\r\n                        color=\"red lighten-2\"\r\n                        outlined\r\n                        dark\r\n                        v-on=\"on\"\r\n                        v-if=\"tournament.tournamentOwner === currentUser && tournamentStarted === false\"\r\n                      >Remove Team</v-btn>\r\n                    </template>\r\n                    <v-card>\r\n                      <v-card-title primary-title>Confirmation</v-card-title>\r\n                      <v-card-text>Are you sure you want to remove this team?</v-card-text>\r\n                      <v-divider></v-divider>\r\n                      <v-card-actions>\r\n                        <v-spacer></v-spacer>\r\n                        <v-btn\r\n                          color=\"red\"\r\n                          text\r\n                          @click=\"dialog = false; deleteTeamFromTournament(row.item.teamId)\"\r\n                        >Remove Team</v-btn>\r\n                      </v-card-actions>\r\n                    </v-card>\r\n                  </v-dialog>\r\n                  <!-- end dialog-->\r\n                </td>\r\n              </tr>\r\n            </template>\r\n          </v-data-table>\r\n        </v-card>\r\n      </v-col>\r\n    </v-row>\r\n    <h1 class=\"text-center\" v-if=\"tournament.completed\">Final Results</h1>\r\n    <v-row v-if=\"tournament.completed\">\r\n      <v-spacer></v-spacer>\r\n      <v-col col=\"1\" class=\"text-center d-flex align-end silver\">\r\n        <v-card height=\"200\" width=\"150\">\r\n          <h2>{{top3[2]}}</h2>\r\n          <v-icon large color=\"#E0E0E0\">mdi-medal</v-icon>\r\n        </v-card>\r\n      </v-col>\r\n      <v-spacer></v-spacer>\r\n      <v-col col=\"1\" class=\"text-center d-flex align-end\">\r\n        <v-card height=\"300\" width=\"150\" color=\"\">\r\n          <h1>{{top3[1]}}</h1>\r\n          <v-icon large color=\"#FFD600\">mdi-medal</v-icon>\r\n        </v-card>\r\n      </v-col>\r\n      <v-spacer></v-spacer>\r\n      <v-col col=\"1\" class=\"text-center d-flex align-end\">\r\n        <v-card height=\"100\" width=\"150\" color=\"\">\r\n          <h3>{{top3[3]}}</h3>\r\n          <v-icon large color=\"#cd7f32\">mdi-medal</v-icon>\r\n        </v-card>\r\n      </v-col>\r\n      <v-spacer></v-spacer>\r\n    </v-row>\r\n    <v-row>\r\n      <v-col class=\"d-flex\" cols=\"12\">\r\n        <v-spacer></v-spacer>\r\n        <h3 v-if=\"rounds.length > 0\">Rounds:</h3>\r\n        <v-card class=\"round\" v-for=\"currentRound in rounds\" :key=\"currentRound\">\r\n          <v-card-actions>\r\n            <v-btn\r\n              :to=\"{name: 'round', params: {id : tournament.tournamentId, roundNumber : currentRound}}\"\r\n              color=\"#03DAC5\"\r\n              small\r\n              outlined\r\n              fab\r\n            >{{currentRound}}</v-btn>\r\n          </v-card-actions>\r\n        </v-card>\r\n        <v-spacer></v-spacer>\r\n      </v-col>\r\n    </v-row>\r\n  </v-container>\r\n</template>\r\n \r\n <script>\r\nimport auth from \"@/auth\";\r\nimport EditTournament from \"@/components/EditTournament.vue\";\r\nimport AcceptEntries from \"@/components/AcceptEntries.vue\";\r\nimport img from '@/image.js';\r\n\r\nexport default {\r\n  components: {\r\n    EditTournament,\r\n    AcceptEntries\r\n  },\r\n  props: {\r\n    currentTournament: Object\r\n  },\r\n  data() {\r\n    return {\r\n      startingTournament: {\r\n        tournamentId: \"\",\r\n        tournamentName: \"\",\r\n        entryFee: \"\",\r\n        game: \"\",\r\n        location: \"\",\r\n        prizeDescription: \"\",\r\n        startDate: \"\",\r\n        endDate: \"\"\r\n      },\r\n      dialog: false,\r\n      dialog2: false,\r\n      currentUser: null,\r\n      searchTeams: \"\",\r\n      tourneyTeamHeaders: [\r\n        { text: \"Team Name\", value: \"teamName\" },\r\n        { text: \"Captain\", value: \"username\" },\r\n        { text: \"Captain Email\", value: \"email\" },\r\n        { text: \"\", value: \"button\" }\r\n      ],\r\n      tourneyTeams: [],\r\n      tournamentOwner: {\r\n        username: \"\"\r\n      },\r\n      rounds: [],\r\n      top3: []\r\n    };\r\n  },\r\n  methods: {\r\n    getTournament() {\r\n      const tourneyId = this.$route.params.id;\r\n      fetch(`${process.env.VUE_APP_REMOTE_API}/api/tournament/${tourneyId}`, {\r\n        method: \"GET\",\r\n        headers: {\r\n          Authorization: \"Bearer \" + auth.getToken()\r\n        }\r\n      })\r\n        .then(response => {\r\n          if (response.ok) {\r\n            return response.json();\r\n          }\r\n        })\r\n        .then(data => {\r\n          this.startingTournament = data;\r\n        });\r\n    },\r\n    getTournamentOwnerUsername() {\r\n      const tourneyId = this.$route.params.id;\r\n      fetch(\r\n        `${process.env.VUE_APP_REMOTE_API}/api/user/tournamentOwner/${tourneyId}`,\r\n        {\r\n          method: \"GET\",\r\n          headers: {\r\n            Authorization: \"Bearer \" + auth.getToken()\r\n          }\r\n        }\r\n      )\r\n        .then(response => {\r\n          if (response.ok) {\r\n            return response.json();\r\n          }\r\n        })\r\n        .then(data => (this.tournamentOwner = data));\r\n    },\r\n    getTourneyTeams() {\r\n      const tourneyId = this.$route.params.id;\r\n      fetch(\r\n        `${process.env.VUE_APP_REMOTE_API}/api/team/tournament/${tourneyId}`,\r\n        {\r\n          method: \"GET\",\r\n          headers: {\r\n            Authorization: \"Bearer \" + auth.getToken()\r\n          }\r\n        }\r\n      )\r\n        .then(response => {\r\n          if (response.ok) {\r\n            return response.json();\r\n          }\r\n        })\r\n        .then(teamsInfo => (this.tourneyTeams = teamsInfo));\r\n    },\r\n    deleteTeamFromTournament(teamId) {\r\n      const tournamentId = this.$route.params.id;\r\n      fetch(\r\n        `${process.env.VUE_APP_REMOTE_API}/api/team/tournament/${tournamentId}?teamId=${teamId}`,\r\n        {\r\n          method: \"DELETE\",\r\n          headers: {\r\n            Authorization: \"Bearer \" + auth.getToken()\r\n          }\r\n        }\r\n      ).then(response => {\r\n        if (response.ok) {\r\n          return response.json();\r\n        }\r\n      });\r\n      this.getTourneyTeams();\r\n    },\r\n    getTourneyRounds() {\r\n      const tournamentId = this.$route.params.id;\r\n      fetch(\r\n        `${process.env.VUE_APP_REMOTE_API}/api/tournament/tournamentRounds/${tournamentId}`,\r\n        {\r\n          method: \"GET\",\r\n          headers: {\r\n            Authorization: \"Bearer \" + auth.getToken()\r\n          }\r\n        }\r\n      )\r\n        .then(response => {\r\n          if (response.ok) {\r\n            return response.json();\r\n          }\r\n        })\r\n        .then(data => (this.rounds = data));\r\n    },\r\n    endTournament() {\r\n      fetch(\r\n        `${process.env.VUE_APP_REMOTE_API}/api/tournament/end?tourneyId=${this.tournament.tournamentId}`,\r\n        {\r\n          method: \"PUT\",\r\n          headers: {\r\n            Authorization: \"Bearer \" + auth.getToken(),\r\n            Accept: \"application/json\",\r\n            \"content-type\": \"application/json\"\r\n          }\r\n        }\r\n      ).then(response => {\r\n        if (response.ok) {\r\n          this.getTourneyRounds();\r\n          this.currentUser = auth.getUser().id;\r\n          this.getTournamentOwnerUsername();\r\n          this.getTourneyTeams();\r\n          this.getTournament();\r\n          this.$emit(\"update-tournament\", this.tournament.tournamentId);\r\n        }\r\n      });\r\n    },\r\n    getTop3() {\r\n      fetch(\r\n        `${process.env.VUE_APP_REMOTE_API}/api/tournament/wins?tourneyId=${this.$route.params.id}`,\r\n        {\r\n          method: \"GET\",\r\n          headers: {\r\n            Authorization: \"Bearer \" + auth.getToken()\r\n          }\r\n        }\r\n      )\r\n        .then(response => {\r\n          if (response.ok) {\r\n            return response.json();\r\n          }\r\n        })\r\n        .then(data => (this.top3 = data));\r\n    },\r\n    updateTourney() {\r\n      this.getTourneyRounds();\r\n      this.getTourneyTeams();\r\n      this.currentUser = auth.getUser().id;\r\n      this.getTournamentOwnerUsername();\r\n      this.getTournament();\r\n      this.getTop3();\r\n    },\r\n    tourneyEvent() {\r\n      this.$emit(\"update-tournament\", this.tournament.tournamentId);\r\n    },\r\n    getImage(){\r\n      return img.getImage(this.tournament.tournamentId);\r\n    }\r\n  },\r\n  computed: {\r\n    tournamentStarted() {\r\n      var date1 = this.tournament.startDate;\r\n      date1 = new Date(date1);\r\n      var date2 = new Date();\r\n      return date1 <= date2;\r\n    },\r\n    tournament() {\r\n      if (this.currentTournament !== null) {\r\n        this.updateTourney();\r\n        return this.currentTournament;\r\n      } else {\r\n        return this.startingTournament;\r\n      }\r\n    }\r\n  },\r\n  created() {\r\n    this.updateTourney();\r\n  }\r\n};\r\n</script>\r\n \r\n <style scoped>\r\n.round {\r\n  margin-right: 10px;\r\n  margin-left: 10px;\r\n}\r\n</style>"]}]}